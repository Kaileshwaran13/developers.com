<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Daily System</title>

<style>
:root {
  --bg:#070b12;
  --panel:#0e1624;
  --accent:#4fc3ff;
  --accent2:#7cff9a;
  --danger:#ff5f5f;
  --text:#e6f0ff;
  --muted:#9bb0cc;
}
* { box-sizing:border-box; margin:0; padding:0; }

html, body {
  width:100%;
  height:100%;
  font-family:'Times New Roman', Times, serif;
  font-style:italic;
  background:#070b12;
  color:var(--text);
}

.system-container {
  width:100%;
  height:100%;
  display:flex;
  justify-content:center;
  align-items:center;
  padding:20px 0;
}

.system {
  width:100%;
  max-width:1200px;
  height:95%;
  background:linear-gradient(180deg,#0e1624,#0a111d);
  border:2px solid #1c2a44;
  border-radius:16px;
  box-shadow:0 0 50px rgba(79,195,255,.3), inset 0 0 30px rgba(79,195,255,.1);
  padding:20px;
  display:flex;
  flex-direction:column;
  align-items:center;
  overflow:hidden;
  justify-content:flex-start;
  animation:borderGlow 3s ease-in-out infinite;
}

@keyframes borderGlow {
  0%, 100% { box-shadow:0 0 50px rgba(79,195,255,.3), inset 0 0 30px rgba(79,195,255,.1); }
  50% { box-shadow:0 0 70px rgba(79,195,255,.5), inset 0 0 40px rgba(79,195,255,.2); }
}

h1 {
  font-size:2rem;
  color:var(--accent);
  text-align:center;
  margin-bottom:16px;
  animation:fadeInDown 1s ease, glow 2s ease-in-out infinite;
  text-shadow:0 0 10px rgba(79,195,255,.8), 0 0 20px rgba(79,195,255,.4);
}
@keyframes fadeInDown {
  from {opacity:0; transform:translateY(-30px);}
  to {opacity:1; transform:translateY(0);}
}
@keyframes glow {
  0%, 100% { text-shadow:0 0 10px rgba(79,195,255,.8), 0 0 20px rgba(79,195,255,.4); }
  50% { text-shadow:0 0 20px rgba(79,195,255,1), 0 0 30px rgba(79,195,255,.6); }
}

.status {
  display:grid;
  grid-template-columns: repeat(auto-fit, minmax(140px,1fr));
  gap:10px;
  margin-bottom:20px;
  width:100%;
}

.card {
  background:linear-gradient(135deg, rgba(20,30,50,.8), rgba(14,22,36,.8));
  border:1.5px solid #1c2a44;
  border-radius:12px;
  padding:12px;
  text-align:center;
  box-shadow:0 0 20px rgba(79,195,255,.2), inset 0 0 10px rgba(79,195,255,.1);
  transition:all 0.3s ease;
}
.card:hover {
  border-color:var(--accent);
  box-shadow:0 0 30px rgba(79,195,255,.4), inset 0 0 15px rgba(79,195,255,.2);
  transform:translateY(-2px);
}
.card .label { font-size:.8rem; color:var(--muted); text-transform:uppercase; letter-spacing:1px; }
.card .value { font-size:1.3rem; margin-top:4px; color:var(--accent); font-weight:bold; text-shadow:0 0 10px rgba(79,195,255,.6); }

.section {
  width:100%;
  margin-bottom:15px;
  border:1px solid #1c2a44;
  border-radius:12px;
  overflow:hidden;
  display:flex;
  flex-direction:column;
}
.section-header {
  background:linear-gradient(90deg, rgba(14,22,36,.8), rgba(20,30,50,.8));
  padding:12px;
  cursor:pointer;
  display:flex;
  justify-content:center;
  align-items:center;
  user-select:none;
  font-weight:bold;
  font-size:1rem;
  text-align:center;
  position:relative;
  box-shadow:0 0 20px rgba(79,195,255,.2), inset 0 0 10px rgba(79,195,255,.05);
  transition:all 0.3s ease;
  color:var(--accent);
}
.section-header:hover {
  box-shadow:0 0 30px rgba(79,195,255,.4), inset 0 0 15px rgba(79,195,255,.1);
  text-shadow:0 0 10px rgba(79,195,255,.8);
}
.section-header span:last-child {
  position:absolute;
  right:12px;
}
.section-content {
  max-height:0;
  overflow:hidden;
  transition:max-height 0.4s ease, padding 0.4s ease;
  display:flex;
  flex-direction:column;
  gap:6px;
  padding:0 12px;
  width:100%;
  box-sizing:border-box;
}
.section-content.open {
  overflow-y:auto;
  padding:12px;
}

.quests {
  display:flex;
  flex-direction:column;
  gap:8px;
  width:100%;
}

.quest {
  background:linear-gradient(135deg, rgba(14,22,36,.9), rgba(20,30,50,.9));
  border:1.5px solid #1c2a44;
  border-radius:12px;
  padding:10px;
  display:flex;
  align-items:center;
  gap:12px;
  transition:all 0.3s cubic-bezier(0.34, 1.56, 0.64, 1);
  user-select:none;
  box-shadow:0 0 15px rgba(79,195,255,.1);
}
.quest:hover {
  border-color:var(--accent);
  box-shadow:0 0 25px rgba(79,195,255,.3), inset 0 0 10px rgba(79,195,255,.1);
  transform:translateX(4px);
}
.quest.done span { opacity:0.6; }
.quest.x2done { 
  background:rgba(255,95,95,.25);
  border-color:var(--danger);
  box-shadow:0 0 16px rgba(255,95,95,.6);
}
.quest.x2done .check.checked {
  background:var(--danger);
  box-shadow:0 0 14px rgba(255,95,95,.8);
}
.quest.dragging { 
  opacity:0.5; 
  transform:scale(0.98);
  background:rgba(79,195,255,.1);
  border-color:var(--accent);
  box-shadow:0 0 20px rgba(79,195,255,.4);
}

.drag-handle {
  cursor:grab;
  user-select:none;
  color:var(--muted);
  font-weight:bold;
  transition:all 0.2s;
}
.quest:hover .drag-handle {
  color:var(--accent);
  transform:scale(1.3);
}
.quest.dragging .drag-handle {
  color:var(--accent2);
  transform:scale(1.5);
}

.check {
  width:24px;
  height:24px;
  border-radius:6px;
  border:2px solid var(--accent);
  display:flex;
  align-items:center;
  justify-content:center;
  cursor:pointer;
  transition:all 0.25s;
  flex-shrink:0;
}
.check.checked {
  background:var(--accent);
  box-shadow:0 0 14px rgba(79,195,255,.8);
}
.check.checked::after {
  content:'‚úì';
  color:#000;
  font-weight:700;
  animation:pop .25s ease-out;
}
@keyframes pop {
  from { transform:scale(.3); opacity:0; }
  to { transform:scale(1); opacity:1; }
}

.delete-btn {
  margin-left:auto;
  cursor:pointer;
  color:var(--danger);
  font-weight:bold;
  transition:all 0.2s;
}

.delete-btn:hover {
  text-shadow:0 0 10px rgba(255,95,95,.8);
  transform:scale(1.15);
}

.multiplier-btn {
  margin-left:auto;
  cursor:pointer;
  color:var(--danger);
  font-weight:bold;
  background:linear-gradient(135deg, rgba(255,95,95,.25), rgba(255,95,95,.15));
  border:1.5px solid var(--danger);
  padding:4px 8px;
  border-radius:6px;
  transition:all 0.2s;
  text-shadow:0 0 10px rgba(255,95,95,.8);
  box-shadow:0 0 10px rgba(255,95,95,.2);
}

.multiplier-btn:hover {
  background:linear-gradient(135deg, rgba(255,95,95,.4), rgba(255,95,95,.25));
  box-shadow:0 0 20px rgba(255,95,95,.6), inset 0 0 10px rgba(255,95,95,.2);
  transform:scale(1.05);
  text-shadow:0 0 15px rgba(255,95,95,1);
}

.multiplier-btn:active {
  transform:scale(0.95);
}

/* ‚úÖ NEON GREEN DROP LINE (ADDED) */
.drag-line {
  height:3px;
  background:linear-gradient(90deg, transparent, var(--accent2), transparent);
  box-shadow:0 0 16px rgba(124,255,154,1), inset 0 0 8px rgba(124,255,154,.6);
  border-radius:2px;
  margin:6px 0;
  pointer-events:none;
  animation:pulse-glow 1s ease-in-out infinite;
}

@keyframes pulse-glow {
  0%, 100% { opacity:0.8; box-shadow:0 0 16px rgba(124,255,154,1); }
  50% { opacity:1; box-shadow:0 0 24px rgba(124,255,154,1), inset 0 0 12px rgba(124,255,154,.8); }
}

.footer {
  margin-top:16px;
  text-align:center;
  font-size:.8rem;
  color:var(--muted);
  width:100%;
}
.timeline {
  margin-top:16px;
  font-size:0.9rem;
  color:var(--muted);
  text-align:center;
  width:100%;
  display:flex;
  justify-content:space-between;
}
.timeline div { flex:1; }

.todo-input {
  width:100%;
  display:flex;
  gap:8px;
  margin-bottom:10px;
  box-sizing:border-box;
}
.todo-input input {
  flex:1;
  padding:8px;
  border-radius:6px;
  border:1.5px solid #1c2a44;
  background:linear-gradient(135deg, rgba(14,22,36,.9), rgba(20,30,50,.9));
  color:var(--text);
  box-shadow:0 0 15px rgba(79,195,255,.1), inset 0 0 8px rgba(79,195,255,.05);
  transition:all 0.3s ease;
}

.todo-input input:focus {
  outline:none;
  border-color:var(--accent);
  box-shadow:0 0 25px rgba(79,195,255,.3), inset 0 0 10px rgba(79,195,255,.1);
}

.todo-input button {
  padding:8px 14px;
  border-radius:6px;
  border:none;
  background:linear-gradient(135deg, var(--accent), rgba(79,195,255,.8));
  color:#000;
  cursor:pointer;
  font-weight:bold;
  transition:all 0.2s;
  box-shadow:0 0 15px rgba(79,195,255,.3);\n}

.todo-input button:hover {
  box-shadow:0 0 25px rgba(79,195,255,.6), inset 0 0 10px rgba(79,195,255,.2);
  transform:translateY(-2px);\n}

/* Password overlay */
#passwordOverlay {
  position:fixed;
  inset:0;
  background:black;
  display:flex;
  justify-content:center;
  align-items:center;
  z-index:1000;
  flex-direction:column;
}
#passwordOverlay input {
  padding:12px;
  font-size:1.2rem;
  border-radius:8px;
  border:none;
  background:#111;
  color:#fff;
  text-align:center;
  width:220px;
}
#passwordOverlay span {
  color:red;
  margin-top:12px;
  font-size:1rem;
  opacity:0;
  transition:opacity 0.3s;
}

/* ‚ú® CUSTOM SCROLLBAR */
.section-content::-webkit-scrollbar {
  width:10px;
}

.section-content::-webkit-scrollbar-track {
  background:rgba(79,195,255,.05);
  border-radius:10px;
}

.section-content::-webkit-scrollbar-thumb {
  background:linear-gradient(180deg, var(--accent), var(--accent2));
  border-radius:10px;
  box-shadow:0 0 12px rgba(79,195,255,.6);
  border:2px solid rgba(79,195,255,.2);
}

.section-content::-webkit-scrollbar-thumb:hover {
  background:linear-gradient(180deg, var(--accent2), var(--accent));
  box-shadow:0 0 20px rgba(79,195,255,1), inset 0 0 8px rgba(124,255,154,.4);
}

/* Firefox scrollbar */
.section-content {
  scrollbar-color: rgba(79,195,255,.8) rgba(79,195,255,.05);
  scrollbar-width: thin;
}

/* ‚ö° RANK REVEAL OVERLAY */
#rankRevealOverlay {
  position:fixed;
  inset:0;
  background:linear-gradient(135deg, #070b12 0%, #0a111d 50%, #070b12 100%);
  display:flex;
  justify-content:center;
  align-items:center;
  z-index:2000;
  backdrop-filter:blur(4px);
  animation:revealFadeIn 0.6s ease-out;
}

@keyframes revealFadeIn {
  from { opacity:0; backdrop-filter:blur(0px); }
  to { opacity:1; backdrop-filter:blur(4px); }
}

.rank-display {
  display:grid;
  grid-template-columns: repeat(3, 1fr);
  gap:40px;
  align-items:center;
  justify-items:center;
  max-width:900px;
  width:90%;
}

.stat-item {
  text-align:center;
  animation:statPopUp 0.8s cubic-bezier(0.34, 1.56, 0.64, 1) both;
}

.stat-rank { animation-delay:0s; }
.stat-level { animation-delay:0.15s; }
.stat-exp { animation-delay:0.3s; }
.stat-str { animation-delay:0.45s; }
.stat-end { animation-delay:0.6s; }

@keyframes statPopUp {
  0% {
    transform:scale(0) rotateZ(-20deg);
    opacity:0;
  }
  50% {
    opacity:1;
  }
  100% {
    transform:scale(1) rotateZ(0deg);
    opacity:1;
  }
}

.stat-value {
  font-weight:bold;
  text-shadow:0 0 80px rgba(79,195,255,.8), 0 0 120px rgba(124,255,154,.4);
  letter-spacing:4px;
  animation:statGlowPulse 1.5s ease-in-out infinite;
  filter:drop-shadow(0 0 40px rgba(79,195,255,.6)) drop-shadow(0 0 60px rgba(124,255,154,.3));
  margin-bottom:12px;
}

.stat-rank .stat-value {
  font-size:12vw;
  background:linear-gradient(135deg, var(--accent), var(--accent2), var(--accent));
  -webkit-background-clip:text;
  -webkit-text-fill-color:transparent;
  background-clip:text;
}

.stat-level .stat-value,
.stat-exp .stat-value,
.stat-str .stat-value,
.stat-end .stat-value {
  font-size:5vw;
  color:var(--accent);
}

@keyframes statGlowPulse {
  0%, 100% {
    transform:scale(1);
    filter:drop-shadow(0 0 40px rgba(79,195,255,.6)) drop-shadow(0 0 60px rgba(124,255,154,.3));
  }
  50% {
    transform:scale(1.05);
    filter:drop-shadow(0 0 60px rgba(79,195,255,.8)) drop-shadow(0 0 80px rgba(124,255,154,.5));
  }
}

.stat-label {
  font-size:1.5rem;
  letter-spacing:3px;
  color:var(--accent);
  text-shadow:0 0 30px rgba(79,195,255,.8), 0 0 50px rgba(79,195,255,.4);
  font-weight:bold;
  opacity:0.9;
}

@keyframes revealFadeOut {
  0% {
    opacity:1;
    backdrop-filter:blur(4px);
  }
  100% {
    opacity:0;
    backdrop-filter:blur(0px);
    pointer-events:none;
  }
}

/* üéÆ LEVEL UP ANIMATION */
#levelUpOverlay {
  position:fixed;
  inset:0;
  background:rgba(0,0,0,.85);
  display:flex;
  justify-content:center;
  align-items:center;
  z-index:3000;
  backdrop-filter:blur(3px);
}

.levelup-popup {
  text-align:center;
  animation:levelupBurst 1.2s ease-out forwards;
}

@keyframes levelupBurst {
  0% {
    transform:scale(0) rotateZ(-30deg);
    opacity:0;
  }
  40% {
    transform:scale(1.15) rotateZ(10deg);
    opacity:1;
  }
  100% {
    transform:scale(1) rotateZ(0deg);
    opacity:1;
  }
}

.levelup-text {
  font-size:8vw;
  font-weight:bold;
  background:linear-gradient(135deg, #ffff00, #ff6b00, #ff00ff);
  -webkit-background-clip:text;
  -webkit-text-fill-color:transparent;
  background-clip:text;
  text-shadow:0 0 100px rgba(255,255,0,.8);
  letter-spacing:6px;
  margin-bottom:20px;
  filter:drop-shadow(0 0 50px rgba(255,255,0,.6));
  animation:levelupGlow 1.5s ease-in-out infinite;
}

@keyframes levelupGlow {
  0%, 100% { filter:drop-shadow(0 0 50px rgba(255,255,0,.6)) drop-shadow(0 0 80px rgba(255,100,0,.4)); }
  50% { filter:drop-shadow(0 0 80px rgba(255,255,0,.8)) drop-shadow(0 0 120px rgba(255,100,0,.6)); }
}

.levelup-new {
  font-size:4vw;
  color:var(--accent);
  font-weight:bold;
  animation:slideInUp 0.8s ease-out 0.4s both;
}

@keyframes slideInUp {
  from { transform:translateY(50px); opacity:0; }
  to { transform:translateY(0); opacity:1; }
}

/* üèÜ ACHIEVEMENT BADGE */
.achievement-popup {
  position:fixed;
  top:20px;
  right:20px;
  background:linear-gradient(135deg, rgba(20,30,50,.95), rgba(14,22,36,.95));
  border:2px solid var(--accent2);
  border-radius:12px;
  padding:16px 24px;
  z-index:2500;
  animation:badgeSlideIn 0.6s cubic-bezier(0.34, 1.56, 0.64, 1);
  box-shadow:0 0 30px rgba(124,255,154,.6), inset 0 0 15px rgba(124,255,154,.2);
  max-width:300px;
}

@keyframes badgeSlideIn {
  from { transform:translateX(400px); opacity:0; }
  to { transform:translateX(0); opacity:1; }
}

.achievement-title {
  color:var(--accent2);
  font-weight:bold;
  font-size:1rem;
  margin-bottom:4px;
  text-shadow:0 0 10px rgba(124,255,154,.8);
}

.achievement-text {
  color:var(--text);
  font-size:0.9rem;
  opacity:0.9;
}

/* üìä STATUS WINDOW */
.status-btn {
  position:fixed;
  bottom:20px;
  right:20px;
  width:50px;
  height:50px;
  background:linear-gradient(135deg, var(--accent), rgba(79,195,255,.8));
  border:2px solid var(--accent);
  border-radius:50%;
  color:#000;
  font-weight:bold;
  cursor:pointer;
  z-index:1500;
  display:flex;
  align-items:center;
  justify-content:center;
  font-size:1.5rem;
  transition:all 0.3s ease;
  box-shadow:0 0 20px rgba(79,195,255,.6);
}

.status-btn:hover {
  transform:scale(1.1);
  box-shadow:0 0 30px rgba(79,195,255,.8);
}

.status-panel {
  position:fixed;
  bottom:80px;
  right:20px;
  background:linear-gradient(180deg, rgba(14,22,36,.95), rgba(10,17,29,.95));
  border:2px solid var(--accent);
  border-radius:12px;
  padding:20px;
  width:300px;
  z-index:1500;
  box-shadow:0 0 30px rgba(79,195,255,.6);
  max-height:400px;
  overflow-y:auto;
  display:none;
  animation:panelSlideIn 0.4s ease-out;
}

@keyframes panelSlideIn {
  from { opacity:0; transform:translateY(20px); }
  to { opacity:1; transform:translateY(0); }
}

.status-panel.show {
  display:block;
}

.status-row {
  display:flex;
  justify-content:space-between;
  padding:8px 0;
  border-bottom:1px solid rgba(79,195,255,.2);
  color:var(--text);
}

.status-row:last-child {
  border-bottom:none;
}

.status-label {
  color:var(--muted);
  font-size:0.9rem;
}

.status-value {
  color:var(--accent);
  font-weight:bold;
}

/* üî• STREAK COUNTER */
.streak-display {
  position:fixed;
  top:20px;
  left:20px;
  background:linear-gradient(135deg, rgba(255,95,95,.2), rgba(255,100,0,.2));
  border:2px solid var(--danger);
  border-radius:12px;
  padding:12px 20px;
  z-index:1500;
  box-shadow:0 0 20px rgba(255,95,95,.6);
  color:var(--danger);
  font-weight:bold;
  text-shadow:0 0 10px rgba(255,95,95,.8);
}

.streak-number {
  font-size:2rem;
  animation:streakPulse 1s ease-in-out infinite;
}

@keyframes streakPulse {
  0%, 100% { transform:scale(1); }
  50% { transform:scale(1.1); }
}

/* üéØ DIFFICULTY METER */
.difficulty-meter {
  position:fixed;
  top:80px;
  left:20px;
  background:linear-gradient(135deg, rgba(20,30,50,.9), rgba(14,22,36,.9));
  border:2px solid var(--accent);
  border-radius:12px;
  padding:12px 16px;
  z-index:1500;
  box-shadow:0 0 20px rgba(79,195,255,.4);
  color:var(--accent);
  font-weight:bold;
  font-size:0.9rem;
  text-align:center;
  text-shadow:0 0 10px rgba(79,195,255,.6);
}

/* üë• SOLDIERS COLLECTED */
.soldiers-display {
  position:fixed;
  top:140px;
  left:20px;
  background:linear-gradient(135deg, rgba(124,255,154,.15), rgba(79,195,255,.15));
  border:2px solid var(--accent2);
  border-radius:12px;
  padding:12px 16px;
  z-index:1500;
  box-shadow:0 0 20px rgba(124,255,154,.4);
  color:var(--accent2);
  font-weight:bold;
  text-align:center;
  font-size:0.9rem;
  text-shadow:0 0 10px rgba(124,255,154,.6);
}

/* üí™ POWER SCALING BAR */
.power-bar-container {
  width:100%;
  background:rgba(0,0,0,.4);
  border:1px solid var(--accent);
  border-radius:6px;
  height:12px;
  margin:8px 0;
  overflow:hidden;
  box-shadow:inset 0 0 10px rgba(79,195,255,.2);
}

.power-bar-fill {
  height:100%;
  background:linear-gradient(90deg, var(--accent2), var(--accent), var(--accent2));
  transition:width 0.5s ease;
  box-shadow:0 0 15px rgba(79,195,255,.8), inset 0 0 8px rgba(124,255,154,.4);
}

/* üìú MOTIVATIONAL QUOTE */
.motivation-panel {
  background:linear-gradient(135deg, rgba(14,22,36,.9), rgba(20,30,50,.9));
  border:2px solid var(--accent2);
  border-radius:12px;
  padding:16px;
  margin-bottom:15px;
  text-align:center;
  box-shadow:0 0 20px rgba(124,255,154,.3);
  color:var(--text);
  font-size:0.95rem;
  font-style:italic;
  text-shadow:0 0 10px rgba(124,255,154,.4);
  animation:quoteSlideIn 0.6s ease-out;
}

@keyframes quoteSlideIn {
  from { opacity:0; transform:translateY(-20px); }
  to { opacity:1; transform:translateY(0); }
}

.motivation-author {
  color:var(--accent2);
  font-size:0.8rem;
  margin-top:8px;
  opacity:0.8;
}

/* üé™ RANK PROGRESSION TIMELINE */
.rank-timeline {
  background:linear-gradient(135deg, rgba(14,22,36,.9), rgba(20,30,50,.9));
  border:2px solid var(--accent);
  border-radius:12px;
  padding:16px;
  margin-bottom:15px;
  box-shadow:0 0 20px rgba(79,195,255,.3);
}

.timeline-ranks {
  display:flex;
  justify-content:space-between;
  gap:8px;
  margin-bottom:8px;
}

.timeline-rank {
  flex:1;
  text-align:center;
  padding:8px;
  border-radius:6px;
  background:rgba(79,195,255,.1);
  color:var(--muted);
  font-size:0.8rem;
  font-weight:bold;
  border:1px solid var(--muted);
  transition:all 0.3s ease;
}

.timeline-rank.current {
  background:linear-gradient(135deg, var(--accent), rgba(79,195,255,.8));
  color:#000;
  border-color:var(--accent);
  box-shadow:0 0 15px rgba(79,195,255,.8);
  transform:scale(1.05);
}

/* üìã WEEKLY CHALLENGE */
.weekly-challenge {
  background:linear-gradient(135deg, rgba(255,100,0,.15), rgba(255,200,0,.15));
  border:2px solid #ffa500;
  border-radius:12px;
  padding:16px;
  margin-bottom:15px;
  box-shadow:0 0 20px rgba(255,165,0,.4);
  color:var(--text);
}

.challenge-title {
  color:#ffa500;
  font-weight:bold;
  margin-bottom:8px;
  text-shadow:0 0 10px rgba(255,165,0,.6);
}

.challenge-desc {
  font-size:0.9rem;
  margin-bottom:8px;
  opacity:0.9;
}

.challenge-progress {
  display:flex;
  align-items:center;
  gap:10px;
  font-size:0.85rem;
}

.challenge-bar {
  flex:1;
  height:8px;
  background:rgba(0,0,0,.4);
  border-radius:4px;
  overflow:hidden;
  border:1px solid #ffa500;
}

.challenge-fill {
  height:100%;
  background:linear-gradient(90deg, #ffa500, #ffff00);
  transition:width 0.4s ease;
}

</style>
</head>

<body>

<div id="passwordOverlay">
  <input type="password" id="passwordInput" placeholder="Enter Password" autofocus>
  <span id="pwError">Unauthorized Access</span>
</div>

<div id="levelUpOverlay" style="display:none;">
  <div class="levelup-popup">
    <div class="levelup-text">LEVEL UP!</div>
    <div class="levelup-new">New Level: <span id="newLevelText">2</span></div>
  </div>
</div>

<div id="achievementContainer"></div>

<div class="streak-display" style="display:none;">
  üî• <span class="streak-number" id="streakCount">0</span> DAY STREAK
</div>

<div class="difficulty-meter">
  <span id="difficultyLabel">E-Rank</span>
</div>

<div class="soldiers-display">
  Shadow Soldiers: <span id="soldiersCount">0</span>
</div>

<div class="status-btn" onclick="toggleStatusPanel()">‚öôÔ∏è</div>
<div class="status-panel" id="statusPanel">
  <div style="color:var(--accent); font-weight:bold; margin-bottom:12px; text-shadow:0 0 10px rgba(79,195,255,.6);">DETAILED STATUS</div>
  <div class="status-row"><span class="status-label">Level:</span><span class="status-value" id="statusLevel">1</span></div>
  <div class="status-row"><span class="status-label">Rank:</span><span class="status-value" id="statusRank">E</span></div>
  <div class="status-row"><span class="status-label">EXP:</span><span class="status-value" id="statusExp">0/100</span></div>
  <div class="status-row"><span class="status-label">Strength:</span><span class="status-value" id="statusStr">0</span></div>
  <div class="status-row"><span class="status-label">Endurance:</span><span class="status-value" id="statusEnd">0</span></div>
  <div class="status-row"><span class="status-label">Soldiers:</span><span class="status-value" id="statusSoldiers">0</span></div>
  <div class="status-row"><span class="status-label">Power:</span><span class="status-value" id="statusPower">0%</span></div>
  <div style="margin-top:12px; padding-top:12px; border-top:1px solid rgba(79,195,255,.2);">
    <div class="power-bar-container">
      <div class="power-bar-fill" id="powerBarFill" style="width:0%;"></div>
    </div>
  </div>
</div>

<div id="rankRevealOverlay" style="display:none;">
  <div class="rank-display">
    <div class="stat-item stat-rank">
      <div class="stat-value" id="rankDisplay">E</div>
      <div class="stat-label">RANK</div>
    </div>
    <div class="stat-item stat-level">
      <div class="stat-value" id="levelDisplay">1</div>
      <div class="stat-label">LEVEL</div>
    </div>
    <div class="stat-item stat-exp">
      <div class="stat-value" id="expDisplay">0/100</div>
      <div class="stat-label">EXP</div>
    </div>
    <div class="stat-item stat-str">
      <div class="stat-value" id="strDisplay">0</div>
      <div class="stat-label">STR</div>
    </div>
    <div class="stat-item stat-end">
      <div class="stat-value" id="endDisplay">0</div>
      <div class="stat-label">END</div>
    </div>
  </div>
</div>

<div class="system-container" style="display:none;">
  <div class="system">

    <h1>SYSTEM ‚Äì DAILY QUEST</h1>
    <div class="status">
      <div class="card"><div class="label">LEVEL</div><div id="level" class="value">1</div></div>
      <div class="card"><div class="label">RANK</div><div id="rank" class="value">E</div></div>
      <div class="card"><div class="label">EXP</div><div id="exp" class="value">0 / 100</div></div>
      <div class="card"><div class="label">STRENGTH</div><div id="str" class="value">0</div></div>
      <div class="card"><div class="label">ENDURANCE</div><div id="end" class="value">0</div></div>
    </div>

    <div class="motivation-panel" id="motivationPanel">
      <div id="quoteText">"Discipline is the bridge between goals and accomplishment"</div>
      <div class="motivation-author">- Solo Leveling</div>
    </div>

    <div class="rank-timeline">
      <div style="color:var(--muted); font-size:0.85rem; margin-bottom:8px;">RANK PROGRESSION</div>
      <div class="timeline-ranks" id="rankTimeline"></div>
    </div>

    <div class="weekly-challenge">
      <div class="challenge-title">üìã WEEKLY CHALLENGE</div>
      <div class="challenge-desc" id="challengeDesc">Complete all 13 workouts this week for double rewards!</div>
      <div class="challenge-progress">
        <span id="challengeProgress">0/13</span>
        <div class="challenge-bar">
          <div class="challenge-fill" id="challengeFill" style="width:0%;"></div>
        </div>
      </div>
    </div>

    <div class="section">
      <div class="section-header" onclick="toggleSection('workoutsContent')">
        Workout <span>&#9660;</span>
      </div>
      <div class="section-content" id="workoutsContent"></div>
    </div>

    <div class="section">
      <div class="section-header" onclick="toggleSection('todoContent')">
        To Do <span>&#9660;</span>
      </div>
      <div class="section-content" id="todoContent">
        <div class="todo-input">
          <input type="text" id="newTask" placeholder="Add new task and press Enter">
          <button id="addBtn">Add</button>
        </div>
        <div id="todoList" class="quests"></div>
      </div>
    </div>

    <div class="footer">Resets automatically at 00:00</div>
    <div class="timeline">
      <div id="missedStreak">Daily Reset: Active</div>
    </div>

  </div>
</div>

<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-app.js";
import { getDatabase, ref, get, set } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-database.js";

const firebaseConfig = {
  projectId: "solo-leveling-36aca",
  databaseURL: "https://solo-leveling-36aca-default-rtdb.firebaseio.com"
};
const app = initializeApp(firebaseConfig);
const db = getDatabase(app);
const userId = 'defaultUser';

const overlay = document.getElementById('passwordOverlay');
const input = document.getElementById('passwordInput');
const errorMsg = document.getElementById('pwError');

async function handlePasswordSuccess(){
  overlay.style.display='none';
  const rankOverlay=document.getElementById('rankRevealOverlay');
  rankOverlay.style.display='flex';
  
  await initSystem();
  
  setTimeout(()=>{
    rankOverlay.style.animation='revealFadeOut 0.8s ease-in forwards';
    setTimeout(()=>{
      rankOverlay.style.display='none';
      document.querySelector('.system-container').style.display='flex';
    }, 800);
  }, 2500);
}

input.addEventListener('keydown', e=>{
  if(e.key==='Enter'){
    if(input.value==='K@ilesh13'){
      handlePasswordSuccess();
    } else {
      errorMsg.style.opacity=1;
    }
  }
});

async function initSystem(){
let level=1, exp=0, expNeeded=100, str=0, end=0,
    completed=[], streakDays=0, missedDays=0, todoTasks=[], lastResetDate=null, baseMultiplier=1, x2Completed=[], 
    prevLevel=1, weeklyCompletions=0, totalWorkouts=0;

const levelEl=document.getElementById('level');
const rankEl=document.getElementById('rank');
const expEl=document.getElementById('exp');
const strEl=document.getElementById('str');
const endEl=document.getElementById('end');
const todoList=document.getElementById('todoList');
const newTask=document.getElementById('newTask');
const addBtn=document.getElementById('addBtn');
const missedStreak=document.getElementById('missedStreak');
const currentStreak=document.getElementById('currentStreak');

const motivationalQuotes=[
  { text: "Discipline is the bridge between goals and accomplishment", author: "Solo Leveling" },
  { text: "Hunters aren't born. They are made through discipline.", author: "Solo Leveling" },
  { text: "Pain is just weakness leaving the body.", author: "Solo Leveling" },
  { text: "You must never give up, no matter what.", author: "Solo Leveling" },
  { text: "The only way to become stronger is through continuous effort.", author: "Solo Leveling" },
  { text: "Your limit is not the sky, it's your determination.", author: "Solo Leveling" },
  { text: "Every setback is a setup for a comeback.", author: "Solo Leveling" },
  { text: "Success is not final, failure is not fatal.", author: "Solo Leveling" }
];

const baseQuests=[
  ['Push-ups',25,'reps'], ['Sit-ups',100,'reps'], ['Squats',100,'reps'],
  ['Dips',100,'reps'], ['Inverted Rows',100,'reps'], ['Russian Twist',100,'reps'],
  ['Lunges',100,'reps'], ['Arm Presser (Each Side)',100,'reps'],
  ['Plank',3,'mins'], ['Left Side Plank',3,'mins'], ['Right Side Plank',3,'mins'],
  ['Swimming',60,'mins'], ['Cycling / Walking',10,'kms']
];

const dragLine=document.createElement('div');
dragLine.className='drag-line';

function toggleStatusPanel(){
  const panel=document.getElementById('statusPanel');
  panel.classList.toggle('show');
}

function updateStatusPanel(){
  document.getElementById('statusLevel').textContent=level;
  document.getElementById('statusRank').textContent=getRank(level*10);
  document.getElementById('statusExp').textContent=`${exp}/${expNeeded}`;
  document.getElementById('statusStr').textContent=str;
  document.getElementById('statusEnd').textContent=end;
  document.getElementById('statusSoldiers').textContent=totalWorkouts;
  const power=Math.min(100, Math.floor((completed.length/baseQuests.length)*100));
  document.getElementById('statusPower').textContent=power+'%';
  document.getElementById('powerBarFill').style.width=power+'%';
}

function updateRankTimeline(){
  const ranks=['E','D','C','B','A','S','SS','SSS','SSS+','‚àû'];
  const currentRank=getRank(level*10);
  const timeline=document.getElementById('rankTimeline');
  timeline.innerHTML='';
  ranks.forEach(r=>{
    const div=document.createElement('div');
    div.className='timeline-rank';
    if(r===currentRank) div.classList.add('current');
    div.textContent=r;
    timeline.appendChild(div);
  });
}

function updateWeeklyChallenge(){
  const progress=Math.min(baseQuests.length, completed.length);
  document.getElementById('challengeProgress').textContent=`${progress}/${baseQuests.length}`;
  const percent=Math.floor((progress/baseQuests.length)*100);
  document.getElementById('challengeFill').style.width=percent+'%';
}

function updateDifficultyMeter(){
  const mult=getMultiplier();
  let diffRank='E-Rank';
  if(mult>=3) diffRank='SSS-Rank';
  else if(mult>=2.5) diffRank='SS-Rank';
  else if(mult>=2) diffRank='S-Rank';
  else if(mult>=1.5) diffRank='A-Rank';
  else if(mult>=1.2) diffRank='B-Rank';
  else if(mult>=1.1) diffRank='C-Rank';
  else if(mult>=1.05) diffRank='D-Rank';
  document.getElementById('difficultyLabel').textContent=`Difficulty: ${diffRank}`;
}

function showLevelUpAnimation(){
  const overlay=document.getElementById('levelUpOverlay');
  document.getElementById('newLevelText').textContent=level;
  overlay.style.display='flex';
  setTimeout(()=>{
    overlay.style.display='none';
  }, 2500);
}

function showAchievement(title, text){
  const container=document.getElementById('achievementContainer');
  const badge=document.createElement('div');
  badge.className='achievement-popup';
  badge.innerHTML=`<div class="achievement-title">üèÜ ${title}</div><div class="achievement-text">${text}</div>`;
  container.appendChild(badge);
  setTimeout(()=>{
    badge.remove();
  }, 4000);
}

function checkAchievements(){
  if(completed.length===5 && !localStorage.getItem('ach_warrior')){
    localStorage.setItem('ach_warrior','true');
    showAchievement('Warrior', 'Complete 5 workouts!');
  }
  if(level*10>=500 && !localStorage.getItem('ach_veteran')){
    localStorage.setItem('ach_veteran','true');
    showAchievement('Veteran', 'Reach 500 EXP!');
  }
  if(streakDays>=30 && !localStorage.getItem('ach_discipline')){
    localStorage.setItem('ach_discipline','true');
    showAchievement('Iron Discipline', '30-day streak achieved!');
  }
}

function autoExpandTodo(){
  const el=document.getElementById('todoContent');
  if(!el.classList.contains('open')) el.classList.add('open');
  requestAnimationFrame(()=>{
    el.style.maxHeight=el.scrollHeight+'px';
  });
}

function updateDailyMotivation(){
  const today=new Date().getDay();
  const quote=motivationalQuotes[today];
  document.getElementById('quoteText').textContent=`"${quote.text}"`;
  document.querySelector('.motivation-author').textContent=`- ${quote.author}`;
}

function getMultiplier(){ return (1+(level-1)*0.05)*baseMultiplier; }
function getRank(totalExp){
  if(totalExp<10000)return'E'; if(totalExp<20000)return'D';
  if(totalExp<30000)return'C'; if(totalExp<40000)return'B';
  if(totalExp<50000)return'A'; if(totalExp<60000)return'S';
  if(totalExp<70000)return'SS'; if(totalExp<80000)return'SSS';
  if(totalExp<90000)return'SSS+'; return'‚àû';
}

function checkDailyReset(){
  const today=new Date().toDateString();
  if(lastResetDate!==today){
    lastResetDate=today;
    completed=[];
    x2Completed=[];
    weeklyCompletions=0;
    todoTasks=todoTasks.filter(task=>!task.done);
    baseMultiplier+=0.05;
    streakDays++;
    saveData();
    buildQuests();
    buildTodo();
    updateUI();
    updateDailyMotivation();
    document.querySelector('.streak-display').style.display='block';
    updateTimeline();
  }
}

setInterval(checkDailyReset, 60000);

async function loadData(){
  const snap=await get(ref(db,'users/'+userId));
  const d=snap.val();
  if(d){
    level=d.level||1; exp=d.exp||0; expNeeded=d.expNeeded||100;
    str=d.str||0; end=d.end||0; completed=d.completed||[];
    streakDays=d.streakDays||0; missedDays=d.missedDays||0;
    todoTasks=d.todoTasks||[]; lastResetDate=d.lastResetDate||null;
    baseMultiplier=d.baseMultiplier||1; x2Completed=d.x2Completed||[];
    totalWorkouts=d.totalWorkouts||0; prevLevel=level;
  }
  checkDailyReset();
  const rank=getRank(level*10);
  document.getElementById('rankDisplay').textContent=rank;
  document.getElementById('levelDisplay').textContent=level;
  document.getElementById('expDisplay').textContent=`${exp}/${expNeeded}`;
  document.getElementById('strDisplay').textContent=str;
  document.getElementById('endDisplay').textContent=end;
  checkDailyReset();
  const rank=getRank(level*10);
  document.getElementById('rankDisplay').textContent=rank;
  document.getElementById('levelDisplay').textContent=level;
  buildQuests(); buildTodo(); updateUI(); updateDailyMotivation(); updateRankTimeline(); updateWeeklyChallenge(); updateStatusPanel(); updateDifficultyMeter(); checkAchievements(); updateTimeline();
}

function saveData(){
  set(ref(db,'users/'+userId),
    {level,exp,expNeeded,str,end,completed,streakDays,missedDays,todoTasks,lastResetDate,baseMultiplier,x2Completed,totalWorkouts,weeklyCompletions});
}

function buildQuests(){
  const wrap=document.getElementById('workoutsContent');
  wrap.innerHTML='';
  const m=getMultiplier();
  baseQuests.forEach(([name,val,type])=>{
    let display=name==='Swimming'?val:Math.round(val*m);
    
    let displayText;
    if(type==='mins'){
      const totalSeconds=Math.round(display*60);
      const mins=Math.floor(totalSeconds/60);
      const secs=totalSeconds%60;
      displayText=`${mins}m ${secs}s`;
    }else{
      displayText=`${display} ${type}`;
    }
    
    const q=document.createElement('div');
    const isX2=x2Completed.includes(name);
    const isDone=completed.includes(name);
    q.className='quest'+(isDone?' done':'')+(isX2?' x2done':'');
    q.dataset.name=name;
    q.innerHTML=
      `<div class="check ${isDone?'checked':''}"
        onclick="toggleQuest(this)"></div>
       <span>${name} ‚Äì ${displayText}</span>
       <button class="multiplier-btn" onclick="toggleQuestX2(event)">√ó2</button>`;
    wrap.appendChild(q);
  });
}

window.toggleQuest=function(box){
  const quest=box.parentElement;
  const name=quest.dataset.name;
  if(completed.includes(name) && !x2Completed.includes(name)) return;
  if(x2Completed.includes(name)) return;
  completed.push(name);
  totalWorkouts++;
  weeklyCompletions++;
  if(name!=='Swimming'){ str++; end++; exp+=10; }
  prevLevel=level;
  if(exp>=expNeeded){ level++; exp=0; expNeeded=Math.floor(expNeeded*1.3); showLevelUpAnimation(); }
  document.getElementById('streakCount').textContent=streakDays;
  document.getElementById('soldiersCount').textContent=totalWorkouts;
  saveData(); buildQuests(); updateUI(); updateWeeklyChallenge(); updateStatusPanel(); checkAchievements(); updateTimeline();
};

window.toggleQuestX2=function(e){
  e.preventDefault();
  e.stopPropagation();
  const quest=e.target.parentElement;
  const name=quest.dataset.name;
  
  if(x2Completed.includes(name)) return;
  
  const wasNormalCompleted=completed.includes(name) && !x2Completed.includes(name);
  
  if(wasNormalCompleted){
    if(name!=='Swimming'){ str+=1; end+=1; exp+=10; }
  }else{
    completed.push(name);
    totalWorkouts++;
    weeklyCompletions++;
    if(name!=='Swimming'){ str+=2; end+=2; exp+=20; }
  }
  
  x2Completed.push(name);
  
  prevLevel=level;
  if(exp>=expNeeded){ level++; exp=0; expNeeded=Math.floor(expNeeded*1.3); showLevelUpAnimation(); }
  document.getElementById('streakCount').textContent=streakDays;
  document.getElementById('soldiersCount').textContent=totalWorkouts;
  saveData(); buildQuests(); updateUI(); updateWeeklyChallenge(); updateStatusPanel(); checkAchievements(); updateTimeline();
};

window.toggleSection=function(id){
  const el=document.getElementById(id);
  if(el.classList.contains('open')){
    el.classList.remove('open');
    el.style.maxHeight='0';
  }else{
    el.classList.add('open');
    el.style.maxHeight=el.scrollHeight+'px';
  }
};

function updateUI(){
  levelEl.textContent=level;
  rankEl.textContent=getRank(level*10);
  expEl.textContent=`${exp} / ${expNeeded}`;
  strEl.textContent=str;
  endEl.textContent=end;
  updateDifficultyMeter();
  updateRankTimeline();
}

function updateTimeline(){
  missedStreak.textContent=`Daily Reset: Active | Streak: ${streakDays} days`;
}

/* -------- TODO (ORIGINAL LOGIC + ADDITIONS ONLY) -------- */
let draggedIndex=-1;

function buildTodo(){
  const list=todoList;
  list.innerHTML='';
  todoTasks.forEach((task,index)=>{
    const div=document.createElement('div');
    div.className='quest';
    div.draggable=true;
    div.dataset.index=index;

    div.innerHTML=`
      <span class="drag-handle">::</span>
      <div class="check ${task.done?'checked':''}"></div>
      <span>${task.text}</span>
      <span class="delete-btn">‚úï</span>
    `;

    div.querySelector('.check').onclick=()=>{
      task.done=!task.done; saveData(); buildTodo();
    };
    div.querySelector('.delete-btn').onclick=()=>{
      todoTasks.splice(index,1); saveData(); buildTodo(); autoExpandTodo();
    };

    div.addEventListener('dragstart',e=>{
      draggedIndex=index;
      e.dataTransfer.effectAllowed='move';
      e.dataTransfer.setData('text/plain',index);
      setTimeout(()=>div.classList.add('dragging'),0);
      autoExpandTodo();
    });
    
    div.addEventListener('dragend',()=>{
      div.classList.remove('dragging');
      draggedIndex=-1;
      dragLine.remove();
      list.querySelectorAll('.quest').forEach(q=>q.style.opacity='');
    });
    
    div.addEventListener('dragover',e=>{
      if(draggedIndex===-1) return;
      e.preventDefault();
      e.dataTransfer.dropEffect='move';
      dragLine.remove();
      
      const rect=div.getBoundingClientRect();
      const isBottom=e.clientY-rect.top>rect.height/2;
      const currentIndex=parseInt(div.dataset.index);
      
      if(draggedIndex!==currentIndex){
        isBottom?div.after(dragLine):div.before(dragLine);
      }
      
      list.querySelectorAll('.quest').forEach((q,i)=>{
        if(i!==draggedIndex) q.style.opacity='0.7';
      });
    });
    
    div.addEventListener('dragleave',()=>{
      if(!div.contains(e.relatedTarget)) dragLine.remove();
    });
    
    div.addEventListener('drop',e=>{
      e.preventDefault();
      dragLine.remove();
      const from=draggedIndex;
      const to=parseInt(div.dataset.index);
      
      if(from===-1 || from===to) return;
      
      const moved=todoTasks.splice(from,1)[0];
      todoTasks.splice(to,0,moved);
      
      saveData();
      buildTodo();
      autoExpandTodo();
    });

    list.appendChild(div);
  });
}

addBtn.onclick=()=>{
  const v=newTask.value.trim();
  if(!v) return;
  todoTasks.push({text:v,done:false});
  newTask.value='';
  saveData(); buildTodo(); autoExpandTodo();
};

newTask.addEventListener('keydown',e=>{
  if(e.key==='Enter'){
    addBtn.click();
  }
});

await loadData();
}
</script>
</body>
</html>
